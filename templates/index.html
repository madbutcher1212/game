<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rodstone War</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- –û–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="loginOverlay" class="overlay">
        <div class="modal">
            <div class="avatar-preview" id="avatarPreview">üë§</div>
            <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
            <p>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –≤ –∏–≥—Ä–µ (–¥–æ 12 —Å–∏–º–≤–æ–ª–æ–≤):</p>
            <input type="text" id="newLogin" placeholder="–í–∞—à–µ –∏–≥—Ä–æ–≤–æ–µ –∏–º—è" maxlength="12">
            <button class="btn" id="confirmLogin">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <!-- –û–∫–Ω–æ —É–ª—É—á—à–µ–Ω–∏—è –∑–¥–∞–Ω–∏—è -->
    <div id="upgradeOverlay" class="overlay" style="display: none;">
        <div class="modal upgrade-modal" id="upgradeModal"></div>
    </div>

    <!-- –û–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞ -->
    <div id="avatarOverlay" class="overlay" style="display: none;">
        <div class="modal avatar-modal">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä</h3>
            <div class="avatar-grid" id="avatarGrid"></div>
            <div class="avatar-actions">
                <button class="btn" id="confirmAvatarBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                <button class="btn btn-secondary" onclick="closeAvatarSelector()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="game">
        <!-- –í–µ—Ä—Ö–Ω–∏–π –±–∞—Ä -->
        <div class="top-bar-fixed">
            <div class="top-bar">
                <div class="avatar" id="avatar">
                    <img id="avatarImg" class="avatar-img" src="" style="display: none;">
                    <span id="avatarPlaceholder">üë§</span>
                </div>
                <div class="user-info">
                    <div class="name-level">
                        <div class="user-name" id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="level-badge" id="levelBadge">1</div>
                    </div>
                    <div class="user-login" id="userLogin">@username</div>
                </div>
                <div class="resources-compact">
                    <div class="resource-block" onclick="showExactValue('gold')">
                        <span>ü™ô</span>
                        <span id="goldDisplay">100</span>
                        <span class="resource-income" id="goldIncome">+0</span>
                    </div>
                    <div class="resource-block" onclick="showExactValue('population')">
                        <span>üë•</span>
                        <span id="populationDisplay">10/20</span>
                        <span class="resource-income" id="populationGrowth">+3</span>
                    </div>
                </div>
            </div>
            <div class="income-timer" id="incomeTimer">
                <div>‚è≥ –°–ª–µ–¥—É—é—â–∏–π —Å–±–æ—Ä —á–µ—Ä–µ–∑: <span id="timerDisplay">59:59</span></div>
                <div class="timer-progress">
                    <div class="timer-progress-bar" id="timerProgress"></div>
                </div>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content-scrollable">
            <div class="tab-content">
                <!-- –ì–æ—Ä–æ–¥ -->
                <div id="tabCity" class="tab-pane active">
                    <div class="city-resources">
                        <div class="city-resource-item" onclick="showExactValue('wood')">
                            <span>ü™µ</span>
                            <span id="woodDisplay">50</span>
                            <span class="resource-income" id="woodIncome">+0</span>
                        </div>
                        <div class="city-resource-item" onclick="showExactValue('stone')">
                            <span>‚õ∞Ô∏è</span>
                            <span id="stoneDisplay">0</span>
                            <span class="resource-income" id="stoneIncome">+0</span>
                        </div>
                        <div class="city-resource-item" onclick="showExactValue('food')">
                            <span>üåæ</span>
                            <span id="foodDisplay">50</span>
                            <span class="resource-income" id="foodIncome">0</span>
                        </div>
                    </div>
                    
                   <!-- –†–∞—Ç—É—à–∞ -->
<div class="town-hall" id="townHall">
    <div class="town-hall-icon">üèõÔ∏è</div>
    <div class="town-hall-info">
        <div class="town-hall-name">–†–∞—Ç—É—à–∞</div>
        <div class="town-hall-income" id="townHallIncome">+5 ü™ô/—á</div>
    </div>
    <div class="town-hall-level-badge" id="townHallLevelBadge">1</div>
    <button class="town-hall-upgrade-btn" id="townHallUpgradeBtn">–£–ª—É—á—à–∏—Ç—å</button>
</div>
                    
                    <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ -->
                    <div class="buildings-section collapsed" id="socialSection">
                        <div class="section-header" onclick="toggleSection('social')">
                            <span class="section-arrow">‚ñ∂</span>
                            <span class="section-title">üèòÔ∏è –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                        <div class="buildings-grid" id="socialBuildings"></div>
                    </div>
                    
                    <!-- –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ -->
                    <div class="buildings-section collapsed" id="economicSection">
                        <div class="section-header" onclick="toggleSection('economic')">
                            <span class="section-arrow">‚ñ∂</span>
                            <span class="section-title">‚öíÔ∏è –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                        <div class="buildings-grid" id="economicBuildings"></div>
                    </div>
                    
                    <!-- –í–æ–µ–Ω–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ -->
                    <div class="buildings-section collapsed" id="militarySection">
                        <div class="section-header" onclick="toggleSection('military')">
                            <span class="section-arrow">‚ñ∂</span>
                            <span class="section-title">‚öîÔ∏è –í–æ–µ–Ω–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                        <div class="buildings-grid" id="militaryBuildings">
                            <div class="empty-message">–°–∫–æ—Ä–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã</div>
                        </div>
                    </div>
                </div>
                
                <!-- –ê—Ä–º–∏—è -->
                <div id="tabArmy" class="tab-pane hidden">
                    <div class="empty-tab">‚öîÔ∏è –ê—Ä–º–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
                </div>
                
                <!-- –ü–æ—Ö–æ–¥—ã -->
                <div id="tabCampaign" class="tab-pane hidden">
                    <div class="empty-tab">üó∫Ô∏è –ü–æ—Ö–æ–¥—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
                </div>
                
                <!-- –ö–ª–∞–Ω—ã -->
                <div id="tabClans" class="tab-pane hidden">
                    <div class="clan-section">
                        <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–æ–º</h3>
                        <input type="text" id="clanName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞–Ω–∞">
                        <input type="text" id="clanTag" placeholder="–¢–µ–≥ (–¥–æ 5 –±—É–∫–≤)">
                        <button class="btn" id="createClanBtn">‚ú® –°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω</button>
                        <button class="btn" id="topClansBtn">üèÜ –¢–æ–ø –∫–ª–∞–Ω–æ–≤</button>
                        <div id="topClans"></div>
                    </div>
                </div>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div id="tabSettings" class="tab-pane hidden">
                    <div class="settings-section">
                        <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        
                        <div class="settings-block">
                            <h4>üñºÔ∏è –ê–≤–∞—Ç–∞—Ä</h4>
                            <div class="avatar-block">
                                <img id="settingsAvatarImg" class="settings-avatar" src="">
                                <div>
                                    <div id="settingsAvatarName">–ú—É–∂—Å–∫–æ–π</div>
                                    <button class="btn" onclick="openAvatarSelector()">–°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-block">
                            <h4>üìù –°–º–µ–Ω–∏—Ç—å –∏–º—è</h4>
                            <div class="name-change">
                                <input type="text" id="newNameInput" placeholder="–ù–æ–≤–æ–µ –∏–º—è" maxlength="12">
                                <button class="btn" id="changeNameWithPriceBtn">5000 ü™ô</button>
                            </div>
                        </div>
                        
                        <div class="user-id-block">
                            <span class="user-id-label">ID:</span>
                            <span class="user-id-value" id="userTelegramId"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ù–∏–∂–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ -->
        <div class="tabs">
            <div class="tab active" data-tab="city"><span class="tab-icon">üè†</span><span>–ì–æ—Ä–æ–¥</span></div>
            <div class="tab" data-tab="army"><span class="tab-icon">‚öîÔ∏è</span><span>–ê—Ä–º–∏—è</span></div>
            <div class="tab" data-tab="campaign"><span class="tab-icon">üó∫Ô∏è</span><span>–ü–æ—Ö–æ–¥—ã</span></div>
            <div class="tab" data-tab="clans"><span class="tab-icon">üë•</span><span>–ö–ª–∞–Ω—ã</span></div>
            <div class="tab" data-tab="settings"><span class="tab-icon">‚öôÔ∏è</span><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>
    <script src="/static/script.js"></script>
</body>
</html>
